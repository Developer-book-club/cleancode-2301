# Chapter 14. 점진적인 개선

#### Args 구현

##### __ 어떻게 짰느냐고?
- 코드를 볼 때 이름을 붙인 방법, 함수 크기, 코드 형식에 주목해서 보라.
- 깨끗한 코드를 짜려면 먼저 지저분한 코드를 짠 뒤에 정리해야 한다.

#### Args: 1차 초안
- 1차 초안으로 짠 코드는 완벽하지 않다. 지저분한 코드이다.

##### __ 그래서 멈췄다
- 추가할 기능이 남아있더라도 코드가 더 지저분해질 것이 예상되면 그 시점에서 멈추고 리팩토링을 먼저 하는 게 낫다.

##### __ 점진적으로 개선하다
- Test-Driven Development 기법을 사용하라. TDD는 언제 어느 때라도 시스템이 돌아가야 한다는 원칙을 따른다. 코드에 변경을 가한 후에도 시스템이 변경 전과 똑같이 돌아가야 한다.
- 변경 전후에 시스템이 똑같이 돌아간다는 사실을 확인하려면 언제든 실행이 가능한 자동화된 테스트 슈트가 필요하다.

#### String 인수
- 코드 변경을 하면 한 번에 하나씩 코드를 변경하면서 그 때마다 자동화된 테스트를 돌려야 한다. 테스트 케이스가 하나라도 실패하면 다음 변경으로 넘어가기 전에 오류를 수정하라.
- 코드 예시에서 리팩토링은 각 인수 유형을 처리하는 코드를 모두 ArgumentMarshaler 클래스에 넣고 나서 ArgumentMarshaler 파생 클래스를 만들어 코드를 분리한다. 그러면 프로그램 구조를 조금씩 변경하는 동안에도 시스템의 정상 동작을 유지하기 쉬워지기 때문이다.
- 함수에서 데이터 타입을 일일이 확인하는 코드는 좋지 않다. setIntArg, setStringArg, setBooleanArt을 해당 Argument Marshaler 파생 클래스로 내려야 한다.
- 모든 예외를 하나로 모아 ArgsException 클래스를 만든 후 독자 모듈로 옮긴다. 예외/오류 처리 코드를 분리한다.
- 소프트웨어 설계는 코드 분리만 잘해도 품질이 크게 높아진다.
